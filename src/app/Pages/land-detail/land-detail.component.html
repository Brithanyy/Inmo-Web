<app-navbar></app-navbar>

@if (error) {
    <div class="alert alert-danger">
        {{error}}
    </div>
}

@else {

    @if(landBuffer) {
        <div class="container mt-4">
            <div class="property-card">
                <!-- Encabezado con título y precio -->
                <div class="property-header">
                    <h2>{{landBuffer.tituloPropiedad}}</h2>
                    <div class="price">Precio US$ {{landBuffer.precioPropiedad}}</div>
                </div>
    
                <!-- Galería de imágenes -->
                <div class="carousel-container">
                    @if(landBuffer.imagenes.length > 0) {
                        <img [src]="landBuffer.imagenes[currentImageIndex]" 
                             alt="Imagen de la propiedad" 
                             class="carousel-image"
                             (click)="openImage(landBuffer.imagenes[currentImageIndex])">
                        <button class="carousel-button prev" (click)="prevImage()" [disabled]="currentImageIndex === 0">❮</button>
                        <button class="carousel-button next" (click)="nextImage()" [disabled]="currentImageIndex === landBuffer.imagenes.length - 1">❯</button>
                        <div class="image-counter">{{currentImageIndex + 1}} / {{landBuffer.imagenes.length}}</div>
                    }
                </div>
    
                <!-- Modal para imagen ampliada -->
                @if(selectedImage) {
                    <div class="modal" (click)="closeImage()">
                        <img [src]="selectedImage" alt="Imagen ampliada" class="modal-image">
                        <button class="close-modal" (click)="closeImage()">✕</button>
                    </div>
                }
    
                <!-- Características -->
                <div class="property-characteristics">
                    <h3>Características</h3>
                    
                    <!-- Descripción -->
                    <div class="description-section">
                        <span class="characteristic-label">Descripción</span>
                        <p>{{landBuffer.descripcionPropiedad}}</p>
                    </div>
                    
                    <!-- Grid de características -->
                    <div class="characteristics-grid">
                        <div class="characteristic-item">
                            <span class="characteristic-label">Superficie cubierta</span>
                            <span>{{landBuffer.superficieCubierta}} m²</span>
                        </div>
                        <div class="characteristic-item">
                            <span class="characteristic-label">Superficie total</span>
                            <span>{{landBuffer.superficieTotal}} m²</span>
                        </div>
                        <div class="characteristic-item">
                            <span class="characteristic-label">Dirección</span>
                            <span>
                                @if(landBuffer.direccionPropiedad.nombre_calle && landBuffer.direccionPropiedad.numero_calle) {
                                    {{landBuffer.direccionPropiedad.nombre_calle}} {{landBuffer.direccionPropiedad.numero_calle}},
                                }
                                {{landBuffer.direccionPropiedad.localidad}}, {{landBuffer.direccionPropiedad.provincia}}, {{landBuffer.direccionPropiedad.pais}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <app-form-review [idPropiedad]="landBuffer.id" [tipoPropiedad]="landBuffer.tipoPropiedad"></app-form-review>
    }
}

<div class="button-container">
    <button routerLink="/home">Atrás</button>
</div>

<app-footer></app-footer>