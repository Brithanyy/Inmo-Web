<app-navbar></app-navbar>

@if(houseBuffer) {
    <div class="container mt-4">
        <div class="property-card">
            <!-- Encabezado con título y precio -->
            <div class="property-header">
                <h2>{{houseBuffer.tituloPropiedad}}</h2>
                <div class="price">Precio US$ {{houseBuffer.precioPropiedad}}</div>
            </div>

            <!-- Galería de imágenes -->
            <div class="carousel-container">
                @if(houseBuffer.imagenes.length > 0) {
                    <img [src]="houseBuffer.imagenes[currentImageIndex]" 
                         alt="Imagen de la propiedad" 
                         class="carousel-image"
                         (click)="openImage(houseBuffer.imagenes[currentImageIndex])">
                    <button class="carousel-button prev" (click)="prevImage()" [disabled]="currentImageIndex === 0">❮</button>
                    <button class="carousel-button next" (click)="nextImage()" [disabled]="currentImageIndex === houseBuffer.imagenes.length - 1">❯</button>
                    <div class="image-counter">{{currentImageIndex + 1}} / {{houseBuffer.imagenes.length}}</div>
                }
            </div>

            <!-- Modal para imagen ampliada -->
            @if(selectedImage) {
                <div class="modal" (click)="closeImage()">
                    <img [src]="selectedImage" alt="Imagen ampliada" class="modal-image">
                    <button class="close-modal" (click)="closeImage()">✕</button>
                </div>
            }

            <!-- Características -->
            <div class="property-characteristics">
                <h3>Características</h3>
                
                <!-- Descripción -->
                <div class="description-section">
                    <span class="characteristic-label">Descripción</span>
                    <p>{{houseBuffer.descripcionPropiedad}}</p>
                </div>
                
                <!-- Grid de características -->
                <div class="characteristics-grid">
                    <!-- Primera fila -->
                    <div class="characteristic-item">
                        <span class="characteristic-label">Superficie cubierta</span>
                        <span>{{houseBuffer.superficieCubierta}} m²</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="characteristic-label">Superficie total</span>
                        <span>{{houseBuffer.superficieTotal}} m²</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="characteristic-label">Dirección</span>
                        <span>{{houseBuffer.direccionPropiedad.nombre_calle}} {{houseBuffer.direccionPropiedad.numero_calle}}, {{houseBuffer.direccionPropiedad.localidad}}, {{houseBuffer.direccionPropiedad.provincia}}, {{houseBuffer.direccionPropiedad.pais}}</span>
                    </div>
                    
                    <!-- Segunda fila -->
                    <div class="characteristic-item">
                        <span class="characteristic-label">Ambientes</span>
                        <span>{{houseBuffer.cantidadAmbientes}}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="characteristic-label">Dormitorios</span>
                        <span>{{houseBuffer.cantidadDormitorios}}</span>
                    </div>
                    <div class="characteristic-item">
                        <span class="characteristic-label">Baños</span>
                        <span>{{houseBuffer.cantidadBanos}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<div class="button-container">
    <button routerLink="/home">Atrás</button>
</div>

<app-footer></app-footer>